import requests
import json

url = "https://telkom-ai-dag-api.apilogy.id/Telkom-LLM/0.0.4/llm/chat/completions"

payload = json.dumps({
  "messages": [
    {
      "role": "system",
      "content": """
Anda adalah asisten Human Capital (HC).  
Tugas Anda adalah merapihkan input user supaya menjadi format JSON dengan field:
- "posisi"
- "atasan"

* PENTING ! * Catatan:
- input user adalah daftar posisi yang sudah diurutkan per-team, dimana manager akan selalu berpasangan bersama dengan managernya, begitupun manager diatasnya pasti SM yang sesuai dengan dia, artinya urutan di input user sudah urut, tugas anda hanya merapihkan table nya supaya keliatan siapa atasannya saja, posisi jangan dihapus, diubah urutannya, atau ditambah.
- Posisi tertinggi ditandai dengan "atasan": "-"
- Setiap posisi lain memiliki nilai "fungsi" sesuai posisi di atasnya. "nama posisi + {nama fungsi}" contoh. SM HC +{subsidiaries and support}

Contoh output:
[
  { "posisi": "SGM HCSP", "atasan": "-" },
  { "posisi": "SM HCSP I", "atasan": "SGM HCSP" }
]
"""
    },
    {
      "role": "user",
      "content": """
tolong rapihkan posisi berikut sesuai format output. rapihkan tanpa kata pengantar, langsung format json :
    DAFTAR POSISI DAN FORMASI ORGANISASI HUMAN CAPITAL STRATEGIC PARTNER CENTER NO NAMA POSISI BARU BP FORMASI 1 SGM HC STRATEGIC PARTNER I 2 SM HC STRATEGIC PARTNER I 3 MANAGER HC INTEGRATED SOLUTION AND DEVELOPMENT I 4 OFF 1HC INTEGRATED SOLUTION AND DEVELOPMENT 5 OFF 2HC INTEGRATED SOLUTION AND DEVELOPMENT 6 OFF 3HC INTEGRATED SOLUTION AND DEVELOPMENT 7 MANAGER HC INTEGRATED SOLUTION AND DEVELOPMENT II 8 OFF 1 INTEGRATED SOLUTION AND DEVELOPMENT 9 OFF 3 INTEGRATED SOLUTION AND DEVELOPMENT 10 MANAGER HC INTEGRATED SOLUTION AND DEVELOPMENT III 11 OFF 1 INTEGRATED SOLUTION AND DEVELOPMENT 12 OFF 1 ADMINISTRATION REGIONAL SUPPORT 13 OFF 2 INTEGRATED SOLUTION AND DEVELOPMENT 14 OFF 3 INTEGRATED SOLUTION AND DEVELOPMENT 15 OFF 3 ADMINISTRATION REGIONAL SUPPORT 16 SM HC STRATEGIC PARTNER II 17 MANAGER HC INTEGRATED SOLUTION AND DEVELOPMENT I 18 OFF 1 INTEGRATED SOLUTION AND DEVELOPMENT 19 OFF 2 INTEGRATED SOLUTION AND DEVELOPMENT 20 OFF 3 INTEGRATED SOLUTION AND DEVELOPMENT 21 MANAGER HC INTEGRATED SOLUTION AND DEVELOPMENT II 22 OFF 1 INTEGRATED SOLUTION AND DEVELOPMENT 23 OFF 2 INTEGRATED SOLUTION AND DEVELOPMENT 24 MANAGER HC INTEGRATED SOLUTION AND DEVELOPMENT III 25 OFF 1 INTEGRATED SOLUTION AND DEVELOPMENT 26 OFF 2 INTEGRATED SOLUTION AND DEVELOPMENT 27 SM HC STRATEGIC PARTNER III 28 MANAGER HC INTEGRATED SOLUTION AND DEVELOPMENT I 29 OFF 1 INTEGRATED SOLUTION AND DEVELOPMENT 30 MANAGER HC INTEGRATED SOLUTION AND DEVELOPMENT II NO NAMA POSISI BARU BP FORMASI 31 OFF 1 INTEGRATED SOLUTION AND DEVELOPMENT IV 1 32 OFF 2 INTEGRATED SOLUTION AND DEVELOPMENT V 2 33 OFF 3 INTEGRATED SOLUTION AND DEVELOPMENT VI 1 34 SM HC STRATEGIC PARTNER TELKOM GROUP LEADERSHIP TALENT II 1 35 MANAGER HC STRATEGIC PARTNER TELKOM LEADERSHIP TALENT I III 1 36 OFF 1 CAREER, TALENT ANALYSIS AND ASSESSMENT IV 1 37 OFF 1 CAREER AND TALENT DEVELOPMENT IV 1 38 OFF 2 CAREER AND TALENT DEVELOPMENT V 1 39 OFF 3 CAREER, TALENT ANALYSIS AND ASSESSMENT VI 1 40 MANAGER HC STRATEGIC PARTNER TELKOM LEADERSHIP TALENT II III 1 41 OFF 1 CAREER, TALENT ANALYSIS AND ASSESSMENT IV 1 42 OFF 1 CAREER AND TALENT DEVELOPMENT IV 1 43 OFF 1 CAREER, TALENT ANALYSIS AND ASSESSMENT IV 1 44 OFF 3 CAREER AND TALENT DEVELOPMENT VI 1 45 MANAGER HC STRATEGIC PARTNER ENTITAS DI LUAR TELKOM GROUP III 1 46 OFF 1 CAREER, TALENT ANALYSIS AND ASSESSMENT IV 1 47 OFF 1 CAREER AND TALENT DEVELOPMENT IV 2 48 SM HC STRATEGIC PARTNER SUBSIDIARIES AND SUPPORT II 1 49 MANAGER HC STRATEGIC PARTNER SUBSIDIARIES III 1 50 OFF 1 HC SOLUTION ADVISORY IV 1 51 OFF 1 SUBSIDIARY INTEGRATED SOLUTION IV 1 52 OFF 3 SUBSIDIARY INTEGRATED SOLUTION VI 1 53 MANAGER HC STRATEGIC PARTNER SUPPORT III 1 54 OFF 3 OFFICE ADMINISTRATION VI 2 TOTAL FORMASI 70 Ditetapkan di : Bandung Pada tanggal : 29 Februari 2024 PERUSAHAAN PERSEROAN (PERSERO) PT TELEKOMUNIKASI INDONESIA Tbk, DIREKTUR HUMAN CAPITAL MANAGEMENT, AFRIWANDI NIK.710364

"""
    }
  ],
  "max_tokens": 2000,
  "temperature": 0,
  "stream": False
})
headers = {
  'Accept': 'application/json',
  'Content-Type': 'application/json',
  'x-api-key': 'ZRfH4nfAPQOxHAA4knKT0POlo1b24ZzT'
}

response = requests.request("POST", url, headers=headers, data=payload)

print(response.text)